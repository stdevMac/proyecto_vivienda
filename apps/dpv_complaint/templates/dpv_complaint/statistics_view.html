{% extends 'dpv_complaint/complaint_main_page.html' %}
{% block page_title %} | Quejas {% endblock page_title %}
{% load static %}
{% block extra_style %}
    <link rel="stylesheet" href="{% static 'dpv_base/css/lib/datatable/dataTables.bootstrap.min.css' %}">
{% endblock extra_style %}
{% block breadcrumb_title %} Gestión de Quejas {% endblock breadcrumb_title %}
{% block breadcrumbs %}
    {{ block.super }}
    {% if '/quejas/natural/' == request.path %}
        <a class="active" href={% url 'main_complaint' %}>Persona natural</a>
    {% elif '/quejas/juridic/' == request.path %}
        <a class="active" href={% url 'main_complaint' %}>Persona jurídica</a>
    {% endif %}
{% endblock breadcrumbs %}
{% block content_page %}
    <script src={% static 'dpv_complaint/js/highcharts.src.js' %}></script>
    <script src={% static 'dpv_complaint/js/jquery.min.js' %}></script>
    <script src={% static 'dpv_complaint/js/exporting.js' %}></script>
    <script src={% static 'dpv_complaint/js/export-data.js' %}></script>
    <script>
        //-------------------------------------------------------
        Highcharts.Renderer.prototype.symbols.line = function (x, y, width, height) {
            return ['M', x, y, 'L', x + height, y];
        };

        var container_graph_char = Highcharts.Chart({

            title: {
                text: 'Solar Employment Growth by Sector, 2010-2016'
            },

            subtitle: {
                text: 'Source: thesolarfoundation.com'
            },

            yAxis: {
                title: {
                    text: 'Number of Employees'
                }
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'middle'
            },

            plotOptions: {
                series: {
                    label: {
                        connectorAllowed: false
                    },
                    pointStart: 2010
                }
            },

            series: [{
                name: 'Installation',
                data: [43934, 52503, 57177, 69658, 97031, 119931, 137133, 154175]
            }, {
                name: 'Manufacturing',
                data: [24916, 24064, 29742, 29851, 32490, 30282, 38121, 40434]
            }, {
                name: 'Sales & Distribution',
                data: [11744, 17722, 16005, 19771, 20185, 24377, 32147, 39387]
            }, {
                name: 'Project Development',
                data: [null, null, 7988, 12169, 15112, 22452, 34400, 34227]
            }, {
                name: 'Other',
                data: [12908, 5948, 8105, 11248, 8989, 11816, 18274, 18111]
            }],

            responsive: {
                rules: [{
                    condition: {
                        maxWidth: 500
                    },
                    chartOptions: {
                        legend: {
                            layout: 'horizontal',
                            align: 'center',
                            verticalAlign: 'bottom'
                        }
                    }
                }]
            },
            chart: {
                renderTo: 'container_graph',
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false,
                type: 'column'
            }
        });
        var container_pie_chart = Highcharts.Chart({
            chart: {
                renderTo: 'container_pie',
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false,
                type: 'pie'
            },
            title: {
                text: 'Quejas Ingresadas este año'
            },
            tooltip: {
                pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: true,
                        format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                        style: {
                            color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                        }
                    }
                }
            },
            series: [{
                name: 'Brands',
                colorByPoint: true,
                data: [{
                    name: 'Quejas Naturales',
                    y: {{ count_nat }},
                    sliced: true,
                    selected: true
                }, {
                    name: 'Quejas Jurídicas',
                    y: {{ count_jur }}
                }]
            }]
        });

    </script>
    <div id="content">
        <div id="container" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto"></div>

        <div id="container_pie" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto"></div>

    </div>

{% endblock content_page %}
